export component DocsLayout({
	children,
	title = 'Docs',
	editPath = '',
	prevLink = null,
	nextLink = null,
	toc = [],
}: {
	children: any;
	title?: string;
	editPath?: string;
	prevLink?: { href: string; text: string } | null;
	nextLink?: { href: string; text: string } | null;
	toc?: { href: string; text: string }[];
}) {
	<head>
		<title>
			{title}
			{' | Ripple'}
		</title>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="" />
		<link
			href="https://fonts.googleapis.com/css2?family=Ubuntu+Sans:ital,wght@0,100..800;1,100..800&family=Fira+Code:wght@300..700&display=swap"
			rel="stylesheet"
		/>
	</head>
	<div class="layout">
		<Header />
		<div class="docs-wrapper">
			<Sidebar />
			<main class="docs-main">
				<article class="docs-content">
					<children />
				</article>
				if (editPath) {
					<div class="edit-link">
						<a
							href={`https://github.com/Ripple-TS/ripple/edit/main/website/${editPath}`}
							target="_blank"
							rel="noopener noreferrer"
						>
							<svg
								xmlns="http://www.w3.org/2000/svg"
								viewBox="0 0 24 24"
								fill="none"
								stroke="currentColor"
								stroke-width="2"
								stroke-linecap="round"
								stroke-linejoin="round"
								class="edit-icon"
							>
								<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
								<path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" />
							</svg>
							{'Edit this page on GitHub'}
						</a>
					</div>
				}
				if (prevLink || nextLink) {
					<nav class="prev-next">
						if (prevLink) {
							<a href={prevLink.href} class="pager prev">
								<span class="desc">{'Previous page'}</span>
								<span class="title">{prevLink.text}</span>
							</a>
						} else {
							<span />
						}
						if (nextLink) {
							<a href={nextLink.href} class="pager next">
								<span class="desc">{'Next page'}</span>
								<span class="title">{nextLink.text}</span>
							</a>
						}
					</nav>
				}
				<Footer />
			</main>
			<aside class="aside">
				if (toc.length > 0) {
					<div class="aside-content">
						<div class="aside-title">{'On this page'}</div>
						<nav class="aside-nav">
							for (const item of toc) {
								<TocLink href={item.href} text={item.text} />
							}
						</nav>
					</div>
				}
			</aside>
		</div>
	</div>

	<style>
		:global(*) {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		:global(html) {
			font-size: 16px;
		}

		:global(body) {
			font-family:
				'Ubuntu Sans',
				-apple-system,
				BlinkMacSystemFont,
				'Segoe UI',
				Roboto,
				sans-serif;
			background: #1b1b1f;
			color: rgba(255, 255, 255, 0.87);
			line-height: 1.7;
			min-height: 100vh;
		}

		:global(code) {
			font-family: 'Fira Code', monospace;
		}

		:global(a) {
			color: #3e95ff;
			text-decoration: none;
		}

		:global(a:hover) {
			color: #5aa5ff;
		}

		.layout {
			min-height: 100vh;
		}

		.docs-wrapper {
			display: flex;
			padding-top: 64px;
		}

		.docs-main {
			flex: 1;
			margin-left: 272px;
			margin-right: 272px;
			min-width: 0;
			padding: 48px 32px 0;
		}

		.docs-content {
			max-width: 688px;
			margin: 0 auto;
		}

		.edit-link {
			padding: 32px 0;
			border-top: 1px solid rgba(84, 84, 84, 0.48);
			margin-top: 32px;
		}

		.edit-link a {
			display: inline-flex;
			align-items: center;
			gap: 8px;
			font-size: 14px;
			font-weight: 500;
			color: #3e95ff;
			transition: color 0.25s;
		}

		.edit-link a:hover {
			color: #5aa5ff;
		}

		.edit-icon {
			width: 18px;
			height: 18px;
		}

		.prev-next {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 16px;
			padding: 32px 0;
			border-top: 1px solid rgba(84, 84, 84, 0.48);
		}

		.pager {
			display: block;
			padding: 11px 16px 13px;
			border: 1px solid rgba(84, 84, 84, 0.48);
			border-radius: 8px;
			transition: border-color 0.25s;
		}

		.pager:hover {
			border-color: #3e95ff;
			text-decoration: none;
		}

		.pager.next {
			text-align: right;
		}

		.pager .desc {
			display: block;
			font-size: 12px;
			font-weight: 500;
			color: rgba(235, 235, 245, 0.6);
			line-height: 20px;
		}

		.pager .title {
			display: block;
			font-size: 14px;
			font-weight: 500;
			color: #3e95ff;
			line-height: 20px;
			transition: color 0.25s;
		}

		.aside {
			position: fixed;
			top: 64px;
			right: 0;
			width: 272px;
			height: calc(100vh - 64px);
			padding: 32px 32px 32px 0;
			overflow-y: auto;
		}

		.aside-content {
			padding-left: 16px;
			border-left: 1px solid rgba(84, 84, 84, 0.48);
		}

		.aside-title {
			font-size: 13px;
			font-weight: 600;
			color: rgba(255, 255, 255, 0.87);
			margin-bottom: 8px;
		}

		@media (max-width: 1280px) {
			.aside {
				display: none;
			}

			.docs-main {
				margin-right: 0;
			}
		}

		@media (max-width: 960px) {
			.docs-main {
				margin-left: 0;
				padding: 24px;
			}
		}
	</style>
}

component Header() {
	<header class="header">
		<div class="header-content">
			<a href="/" class="logo-link">
				<img src="/images/ripple-logo-horizontal.png" alt="Ripple" class="logo" />
			</a>
			<div class="header-content-body">
				<div class="search-wrapper">
					<button type="button" class="search-button">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							viewBox="0 0 24 24"
							fill="none"
							stroke="currentColor"
							stroke-width="2"
							stroke-linecap="round"
							stroke-linejoin="round"
							class="search-icon"
						>
							<circle cx="11" cy="11" r="8" />
							<line x1="21" y1="21" x2="16.65" y2="16.65" />
						</svg>
						<span class="search-text">{'Search'}</span>
						<span class="search-shortcut">{'⌘ K'}</span>
					</button>
				</div>
				<nav class="nav">
					<a href="/llms.txt" class="nav-link">{'llms.txt'}</a>
					<a href="/playground" class="nav-link">{'Playground'}</a>
					<a href="/docs/introduction" class="nav-link active">{'Docs'}</a>
				</nav>
				<div class="appearance">
					<button type="button" class="theme-toggle">
						<svg viewBox="0 0 24 24" class="theme-icon">
							<path
								fill="currentColor"
								d="M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"
							/>
						</svg>
					</button>
				</div>
				<div class="social-links">
					<a
						href="https://github.com/Ripple-TS/ripple"
						target="_blank"
						rel="noopener noreferrer"
						class="social-link"
					>
						<svg viewBox="0 0 24 24" class="social-icon">
							<path
								fill="currentColor"
								d="M12 2C6.475 2 2 6.475 2 12a9.994 9.994 0 0 0 6.838 9.488c.5.087.687-.213.687-.476 0-.237-.013-1.024-.013-1.862-2.512.463-3.162-.612-3.362-1.175-.113-.288-.6-1.175-1.025-1.413-.35-.187-.85-.65-.013-.662.788-.013 1.35.725 1.538 1.025.9 1.512 2.338 1.087 2.912.825.088-.65.35-1.087.638-1.337-2.225-.25-4.55-1.113-4.55-4.938 0-1.088.387-1.987 1.025-2.688-.1-.25-.45-1.275.1-2.65 0 0 .837-.262 2.75 1.026a9.28 9.28 0 0 1 2.5-.338c.85 0 1.7.112 2.5.337 1.912-1.3 2.75-1.024 2.75-1.024.55 1.375.2 2.4.1 2.65.637.7 1.025 1.587 1.025 2.687 0 3.838-2.337 4.688-4.562 4.938.362.312.675.912.675 1.85 0 1.337-.013 2.412-.013 2.75 0 .262.188.574.688.474A10.016 10.016 0 0 0 22 12c0-5.525-4.475-10-10-10z"
							/>
						</svg>
					</a>
					<a
						href="https://discord.gg/JBF2ySrh2W"
						target="_blank"
						rel="noopener noreferrer"
						class="social-link"
					>
						<svg viewBox="0 0 24 24" class="social-icon">
							<path
								fill="currentColor"
								d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"
							/>
						</svg>
					</a>
				</div>
			</div>
		</div>
	</header>

	<style>
		.header {
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			height: 64px;
			background: #1b1b1f;
			border-bottom: 1px solid rgba(84, 84, 84, 0.48);
			z-index: 100;
		}

		.header-content {
			display: flex;
			align-items: center;
			height: 100%;
			padding: 0 32px 0 24px;
		}

		.logo-link {
			display: flex;
			align-items: center;
			flex-shrink: 0;
			margin-right: 32px;
		}

		.logo {
			height: 32px;
			width: auto;
		}

		.header-content-body {
			display: flex;
			align-items: center;
			flex-grow: 1;
			justify-content: flex-end;
		}

		.search-wrapper {
			flex-grow: 1;
			display: flex;
			justify-content: center;
			padding-right: 32px;
		}

		.search-button {
			display: flex;
			align-items: center;
			gap: 8px;
			padding: 0 12px;
			height: 40px;
			background: rgba(255, 255, 255, 0.05);
			border: 1px solid rgba(84, 84, 84, 0.48);
			border-radius: 8px;
			cursor: pointer;
			color: rgba(255, 255, 255, 0.5);
			font-size: 14px;
			min-width: 176px;
			max-width: 256px;
			transition: border-color 0.25s;
		}

		.search-button:hover {
			border-color: #3e95ff;
		}

		.search-icon {
			width: 16px;
			height: 16px;
			flex-shrink: 0;
		}

		.search-text {
			flex: 1;
			text-align: left;
		}

		.search-shortcut {
			font-size: 12px;
			background: rgba(255, 255, 255, 0.1);
			padding: 2px 6px;
			border-radius: 4px;
			flex-shrink: 0;
		}

		.nav {
			display: flex;
			align-items: center;
			gap: 24px;
			margin-right: 16px;
			flex-shrink: 0;
		}

		.nav-link {
			font-size: 14px;
			font-weight: 500;
			color: rgba(255, 255, 245, 0.86);
			transition: color 0.25s;
			white-space: nowrap;
		}

		.nav-link:hover {
			color: #3e95ff;
		}

		.nav-link.active {
			color: #3e95ff;
		}

		.appearance {
			display: flex;
			align-items: center;
			margin-right: 8px;
			flex-shrink: 0;
		}

		.theme-toggle {
			display: flex;
			align-items: center;
			justify-content: center;
			width: 36px;
			height: 36px;
			border-radius: 50%;
			border: 1px solid rgba(84, 84, 84, 0.48);
			background: transparent;
			cursor: pointer;
			color: rgba(255, 255, 245, 0.86);
			transition:
				color 0.25s,
				border-color 0.25s;
		}

		.theme-toggle:hover {
			color: rgba(255, 255, 255, 0.87);
			border-color: rgba(255, 255, 255, 0.4);
		}

		.theme-icon {
			width: 18px;
			height: 18px;
		}

		.social-links {
			display: flex;
			align-items: center;
			gap: 8px;
			flex-shrink: 0;
		}

		.social-link {
			display: flex;
			align-items: center;
			justify-content: center;
			width: 36px;
			height: 36px;
			color: rgba(255, 255, 245, 0.86);
			transition: color 0.25s;
		}

		.social-link:hover {
			color: #3e95ff;
		}

		.social-icon {
			width: 20px;
			height: 20px;
		}

		@media (max-width: 768px) {
			.nav {
				display: none;
			}

			.search-button {
				min-width: auto;
			}

			.search-text,
			.search-shortcut {
				display: none;
			}
		}
	</style>
}

component Sidebar() {
	<nav class="sidebar">
		<div class="sidebar-content">
			<div class="group">
				<SidebarGroup title="Getting Started" hasActive>
					<SidebarItem href="/docs/introduction" text="Introduction" active />
					<SidebarItem href="/docs/quick-start" text="Quick Start" />
				</SidebarGroup>
			</div>
			<div class="group">
				<SidebarGroup title="Guide">
					<SidebarItem href="/docs/guide/application" text="Creating an Application" />
					<SidebarItem href="/docs/guide/syntax" text="Template Syntax" />
					<SidebarItem href="/docs/guide/components" text="Components" />
					<SidebarItem href="/docs/guide/control-flow" text="Control Flow" />
					<SidebarItem href="/docs/guide/reactivity" text="Reactivity" />
					<SidebarItem href="/docs/guide/events" text="Events" />
					<SidebarItem href="/docs/guide/dom-refs" text="DOM References" />
					<SidebarItem href="/docs/guide/state-management" text="State Management" />
					<SidebarItem href="/docs/guide/head-management" text="Head Management" />
					<SidebarItem href="/docs/guide/styling" text="Styling" />
					<SidebarItem href="/docs/guide/bindings" text="Bindings" />
				</SidebarGroup>
			</div>
			<div class="group">
				<SidebarGroup title="Further Reading">
					<SidebarItem href="/docs/comparison" text="Comparison to Other Frameworks" />
					<SidebarItem href="/docs/best-practices" text="Best Practices" />
					<SidebarItem href="/docs/libraries" text="Libraries" />
					<SidebarItem href="/docs/troubleshooting" text="Troubleshooting" />
				</SidebarGroup>
			</div>
			<div class="group">
				<SidebarGroup title="Miscellaneous">
					<SidebarItem href="/llms.txt" text="llms.txt" external />
				</SidebarGroup>
			</div>
		</div>
	</nav>

	<style>
		.sidebar {
			position: fixed;
			top: 64px;
			left: 0;
			width: 272px;
			height: calc(100vh - 64px);
			padding: 32px 24px 96px 28px;
			overflow-x: hidden;
			overflow-y: auto;
			background: #161618;
		}

		.sidebar-content {
			display: flex;
			flex-direction: column;
		}

		.group {
			padding: 10px 0 0;
		}

		.group:first-child {
			padding-top: 0;
		}

		.group + .group {
			border-top: 1px solid rgba(84, 84, 84, 0.48);
		}

		@media (max-width: 960px) {
			.sidebar {
				display: none;
			}
		}
	</style>
}

component SidebarGroup({
	title,
	children,
	hasActive = false,
}: {
	title: string;
	children: any;
	hasActive?: boolean;
}) {
	let expanded = @true;

	<section class={`sidebar-group ${hasActive ? 'has-active' : ''} ${@expanded ? '' : 'collapsed'}`}>
		<div class="item" role="button" tabindex="0" onClick={() => (@expanded = !@expanded)}>
			<h2 class="text">{title}</h2>
			<div class="caret" role="button" aria-label="toggle section" tabindex="0">
				<svg class="caret-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
					<path
						fill="none"
						stroke="currentColor"
						stroke-width="2"
						stroke-linecap="round"
						stroke-linejoin="round"
						d="m6 9 6 6 6-6"
					/>
				</svg>
			</div>
		</div>
		if (@expanded) {
			<div class="items">
				<children />
			</div>
		}
	</section>

	<style>
		.sidebar-group {
			padding-bottom: 24px;
		}

		.sidebar-group.collapsed {
			padding-bottom: 10px;
		}

		.item {
			display: flex;
			align-items: center;
			justify-content: space-between;
			width: 100%;
			cursor: pointer;
		}

		.text {
			font-size: 14px;
			font-weight: 700;
			line-height: 28px;
			color: rgba(255, 255, 245, 0.86);
		}

		.caret {
			display: flex;
			justify-content: center;
			align-items: center;
			margin-right: -7px;
			width: 32px;
			height: 32px;
			color: rgba(235, 235, 245, 0.6);
			cursor: pointer;
			transition: color 0.25s;
			flex-shrink: 0;
		}

		.caret:hover {
			color: rgba(255, 255, 245, 0.86);
		}

		.caret-icon {
			width: 18px;
			height: 18px;
			transform: rotate(0deg);
			transition: transform 0.25s;
		}

		.sidebar-group.collapsed .caret-icon {
			transform: rotate(-90deg);
		}

		.items {
			padding-top: 4px;
		}
	</style>
}

component SidebarItem({
	href,
	text,
	external = false,
	active = false,
}: {
	href: string;
	text: string;
	external?: boolean;
	active?: boolean;
}) {
	<div class={`sidebar-item ${active ? 'is-active' : ''}`}>
		<div class="item">
			if (external) {
				<a {href} target="_blank" rel="noopener noreferrer" class="link">
					<p class="text">
						{text}
						<span class="external-icon">{'↗'}</span>
					</p>
				</a>
			} else {
				<a {href} class="link">
					<p class="text">{text}</p>
				</a>
			}
		</div>
	</div>

	<style>
		.sidebar-item {
			position: relative;
		}

		.item {
			position: relative;
			display: flex;
			width: 100%;
		}

		.link {
			display: block;
			width: 100%;
			padding: 4px 0;
		}

		.text {
			font-size: 14px;
			font-weight: 500;
			line-height: 28px;
			color: rgba(235, 235, 245, 0.6);
			transition: color 0.25s;
		}

		.link:hover .text {
			color: #3e95ff;
		}

		.sidebar-item.is-active .text {
			color: #3e95ff;
		}

		.external-icon {
			font-size: 11px;
			margin-left: 4px;
			opacity: 0.7;
		}
	</style>
}

component Footer() {
	<footer class="docs-footer">
		<div class="footer-content">
			<p class="footer-message">{'Released under the MIT License.'}</p>
			<p class="footer-copyright">{'Copyright © 2025-present Dominic Gannaway'}</p>
		</div>
	</footer>

	<style>
		.docs-footer {
			border-top: 1px solid rgba(84, 84, 84, 0.48);
			padding: 32px 0;
			margin-top: 32px;
		}

		.footer-content {
			text-align: center;
		}

		.footer-message,
		.footer-copyright {
			font-size: 14px;
			font-weight: 500;
			color: rgba(235, 235, 245, 0.6);
			margin: 0;
			line-height: 24px;
		}
	</style>
}

component TocLink({ href, text }: { href: string; text: string }) {
	<a {href} class="toc-link">{text}</a>

	<style>
		.toc-link {
			display: block;
			font-size: 13px;
			color: rgba(235, 235, 245, 0.6);
			padding: 4px 0;
			line-height: 20px;
			transition: color 0.25s;
		}

		.toc-link:hover {
			color: rgba(255, 255, 255, 0.87);
		}
	</style>
}

export { TocLink };
